components:
  callbacks:
    exampleCallback:
      '{$request.body#/callbackUrl}':
        post:
          requestBody:
            content:
              application/json:
                schema:
                  type: object
          responses:
            200:
              description: OK
  examples:
    comments:
      value:
      - id: 10
        name: Jessica Smith
      - id: 20
        name: Ron Stewart
    posts:
      value:
      - id: IDP000001
        images: []
        intro: Intro of test post 1.
        tags:
        - tag1
        - tag2
        title: Test Post 1
      - id: IDP000002
        images:
        - post2.jpg
        intro: Intro of test post 2.
        tags:
        - tag1
        title: Test Post 2
    user:
      value:
        email: user@example.com
        firstName: Test
        id: IDU000001
        image: profile.jpg
        lastName: User
        username: testuser
  headers:
    Content-Language:
      description: Language of response.
      schema:
        type: integer
    X-RateLimit-Limit:
      description: Request limit per hour.
      schema:
        type: integer
    X-RateLimit-Remaining:
      description: The number of requests left for the time window.
      schema:
        type: integer
    X-RateLimit-Reset:
      description: The UTC date/time at which the current rate limit window resets.
      schema:
        format: date-time
        type: string
  links:
    GetUserByUserId:
      description: 'The `id` value returned in the response can be used as the `userId`
        parameter in `GET /users/{userId}`.

        '
      operationId: getUser
      parameters:
        userId: $response.body#/id
  parameters:
    commentId:
      in: path
      name: commentId
      required: true
      schema:
        type: string
    fieldsParam:
      description: Get only specific fields (or exclude them).
      examples:
        exclude:
          summary: Exclude creation date from response.
          value:
          - -createdAt
        include:
          summary: Get only first and last name.
          value:
          - firstName
          - lastName
      explode: false
      in: query
      name: fields
      required: false
      schema:
        items:
          type: string
        type: array
      style: form
    filterParam:
      description: 'Filter result collection by values of specific fields.

        Generic name `field` is used in this definition, but it can be substituted
        with any field of the result schema.

        Common operators for all field types (boolean, string, date, numeric):

        - `.ne` - not equals

        - `.eq` - equals

        Numeric, date and string only operators:

        - `.gt`- greater ( > )

        - `.gte` - greater than (>=)

        - `.lt` - less (<)

        - `.lte` - less than (<=)

        String only operators:

        - `regex` - match regex expression

        - `.cs` - contains substring

        - `.ncs` - does not contain substring

        - `.nregex` - does not match regular expression

        E.g. `?createdAt[lt]=2020-06-10&updatedAt[lt]=2020-06-12`

        '
      explode: true
      in: query
      name: field
      required: false
      schema:
        type: string
      style: deepObject
    langHeader:
      description: '`Accept-Language` header according to HTTP standards, it contains:

        - `<language>`: locale identifier. Language tag, followed by an optional country
        or region variant subtags  (like `en-US` or `fr-CA`).

        - `*`: any language wildcard.

        - `;q=`: q-factor weights describing order of priority of values in a comma-separated
        list. (E.g. `en-US, en;q=0.9, fr-CH;q=0.8, fr;q=0.7, *;q=0.5`)

        '
      in: header
      name: Accept-Language
      required: true
      schema:
        default: hu-HU
        enum:
        - hu-HU
        - en-US
        type: string
    limitParam:
      description: The numbers of items to return.
      examples:
        ten:
          summary: Return 10 matching items starting at index of `offset` value.
          value: 10
      in: query
      name: limit
      required: false
      schema:
        default: 20
        maximum: 50
        minimum: 1
        type: integer
    offsetParam:
      description: The number of items to skip before starting to collect the result
        set.
      examples:
        ten:
          summary: Skip first 10 items from match.
          value: 10
        zero:
          summary: Return items from the first matching one.
          value: 0
      in: query
      name: offset
      required: false
      schema:
        minimum: 0
        type: integer
    postId:
      in: path
      name: postId
      required: true
      schema:
        type: string
    searchParam:
      description: Free text search.
      in: query
      name: q
      required: false
      schema:
        type: string
    sortParam:
      description: 'Sort queries with direction (`+` ascending / `-` descending) and
        fields.

        '
      examples:
        ascendingByDate:
          summary: Sort ascending by `field createdAt`
          value: createdAt
        descendingByDate:
          summary: Sort descending by `field createdAt`
          value: createdAt
      in: query
      name: sort
      required: false
      schema:
        type: string
    userId:
      in: path
      name: userId
      required: true
      schema:
        type: string
  requestBodies:
    CommentBody:
      content:
        application/json:
          schema:
            properties:
              createdAt:
                format: date-time
                type: string
              id:
                description: Unique id
                example: ID0000000
                type: string
              message:
                type: string
              postId:
                description: Unique id
                example: ID0000000
                type: string
              updatedAt:
                format: date-time
                type: string
              username:
                type: string
            required:
            - comment
            - postId
            - user
            type: object
      description: A JSON object containing comment information
      required: true
    PostBody:
      content:
        application/json:
          schema:
            allOf:
            - $ref: '#/Post'
            - properties:
                content:
                  maxLength: 15000
                  type: string
                createdAt:
                  format: date-time
                  type: string
                updatedAt:
                  format: date-time
                  type: string
              type: object
      description: A JSON object containing blog post information
      required: true
  responses:
    Conflict:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: Conflict
    Forbidden:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: Unauthorized
    Gone:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: Gone (e.g. end point is no longer available)
    InternalError:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: Internal server error
    InvalidValue:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: Invalid value
    NotFound:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: The specified resource was not found
    NotImplemented:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: Not Implemented
    ServiceUnavailable:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: Service Unavailable
    TooMany:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: Too Many Attempts or Requests
    Unauthorized:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: Unauthorized
    Unexpected:
      content:
        application/json:
          examples:
            E1000:
              value:
                code: 1000
                message: Dummy custom error code 1000
            E1001:
              value:
                code: 1001
                message: Dummy custom error code 1001
          schema:
            properties:
              code:
                type: string
              fields:
                properties: {}
                type: object
              message:
                type: string
            required:
            - code
            - message
            type: object
      description: Generic error
  schemas:
    Comment:
      properties:
        createdAt:
          format: date-time
          type: string
        id:
          description: Unique id
          example: ID0000000
          type: string
        message:
          type: string
        postId:
          description: Unique id
          example: ID0000000
          type: string
        updatedAt:
          format: date-time
          type: string
        username:
          type: string
      required:
      - comment
      - postId
      - user
      type: object
    Config:
      properties:
        config:
          additionalProperties:
            type: string
          type: object
        update:
          properties:
            force:
              description: true if upgrade mandatory
              type: boolean
            link:
              description: navigable URL
              example: https://google.com
              type: string
            recommended:
              description: false if upgrade recommended
              type: boolean
          type: object
        version:
          description: Describe server version
          type: string
      type: object
    Device:
      properties:
        id:
          description: Unique id
          example: ID0000000
          type: string
        platform:
          description: Device platform
          enum:
          - Web
          - Android
          - iOS
          type: string
        token:
          type: string
      required:
      - token
      - platform
    Error:
      properties:
        code:
          type: string
        fields:
          properties: {}
          type: object
        message:
          type: string
      required:
      - code
      - message
      type: object
    Health:
      properties:
        connections:
          additionalProperties:
            $ref: '#/HealthConnection'
          description: Named connection test for each db and other integrations
          type: object
        timestamp:
          format: date-time
          type: string
        uptime:
          description: Server uptime in milliseconds
          type: number
      required:
      - generatedAt
      - uptime
      - connections
      type: object
    HealthConnection:
      properties:
        duration:
          description: Connection test duration in milliseconds
          type: number
        status:
          description: Status message, e.g. for describing errors
          type: string
        success:
          description: true if connection check succeed
          type: boolean
        timestamp:
          format: date-time
          type: string
      required:
      - timestamp
      - success
      - duration
      - message
      type: object
    Post:
      properties:
        id:
          description: Unique id
          example: ID0000000
          type: string
        images:
          items:
            description: Image url
            example: image.jpg
            type: string
          type: array
        intro:
          maxLength: 500
          type: string
        tags:
          items:
            type: string
          type: array
        title:
          maxLength: 150
          minLength: 3
          type: string
      required:
      - tags
      - title
      - intro
    PostDetailed:
      allOf:
      - $ref: '#/Post'
      - properties:
          content:
            maxLength: 15000
            type: string
          createdAt:
            format: date-time
            type: string
          updatedAt:
            format: date-time
            type: string
        type: object
    Token:
      description: Bearer JWT token
      properties:
        token:
          type: string
      type: object
    User:
      properties:
        email:
          format: email
          type: string
        id:
          description: Unique id
          example: ID0000000
          type: string
        username:
          type: string
      required:
      - username
      - email
      type: object
    UserDetailed:
      allOf:
      - $ref: '#/User'
      - properties:
          firstName:
            type: string
          image:
            type: string
          lastName:
            type: string
        type: object
    UserRegistration:
      properties:
        email:
          format: email
          type: string
        firstName:
          type: string
        lastName:
          type: string
        password:
          type: string
      type: object
  securitySchemes:
    ApiKey:
      description: API key for all endpoints
      in: header
      name: X-API-Key
      type: apiKey
    BasicAuth:
      scheme: basic
      type: http
    BearerAuth:
      bearerFormat: JWT
      description: JWT header
      scheme: bearer
      type: http
info:
  description: Example OpenAPI 3.0 (OAS 3.0) specification for a blog service.
  title: Multi-file swagger REST API specification
  version: 1.0.0
openapi: 3.0.3
paths:
  /blog/post:
    get:
      description: Get posts list with filtering and pagination
      operationId: getPosts
      parameters:
      - $ref: '#/components/parameters/langHeader'
      - $ref: '#/components/parameters/searchParam'
      - $ref: '#/components/parameters/sortParam'
      - $ref: '#/components/parameters/fieldsParam'
      - $ref: '#/components/parameters/filterParam'
      - $ref: '#/components/parameters/offsetParam'
      - $ref: '#/components/parameters/limitParam'
      responses:
        200:
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Post'
                type: array
          description: Post objects
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Get blog posts
      tags:
      - Blog
    parameters:
    - $ref: '#/components/parameters/langHeader'
    post:
      description: Create a new post to a blog with uploading images
      operationId: createPost
      requestBody:
        content:
          multipart/form-data:
            encoding:
              filename:
                contentType: image/png, image/jpeg
            schema:
              properties:
                filename:
                  items:
                    format: binary
                    type: string
                  type: array
                post:
                  $ref: '#/components/schemas/PostDetailed'
              type: object
        description: Post to create
        required: true
      responses:
        201:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostDetailed'
          description: Created post object
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Create post
      tags:
      - Blog
  /blog/post/{postId}:
    delete:
      description: Remove post from blog
      operationId: deletePost
      responses:
        204:
          description: Removed
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Remove post
      tags:
      - Blog
    get:
      description: Get one post from blog
      operationId: getPost
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostDetailed'
          description: Post object
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Get post
      tags:
      - Blog
    parameters:
    - $ref: '#/components/parameters/langHeader'
    - $ref: '#/components/parameters/postId'
    put:
      description: Change post details
      operationId: updatePost
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostDetailed'
        description: Post to update
        required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostDetailed'
          description: Post object
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        404:
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Update post
      tags:
      - Blog
  /blog/post/{postId}/comment:
    get:
      description: Get list of comments that belongs to a post
      operationId: getComments
      parameters:
      - $ref: '#/components/parameters/searchParam'
      - $ref: '#/components/parameters/sortParam'
      - $ref: '#/components/parameters/fieldsParam'
      - $ref: '#/components/parameters/filterParam'
      - $ref: '#/components/parameters/offsetParam'
      - $ref: '#/components/parameters/limitParam'
      responses:
        200:
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Comment'
                type: array
          description: Comment objects
        401:
          $ref: '#/components/responses/Unauthorized'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Get comments
      tags:
      - Blog
    parameters:
    - $ref: '#/components/parameters/langHeader'
    - $ref: '#/components/parameters/postId'
    post:
      description: Create a new comment
      operationId: createComment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Comment'
        required: true
      responses:
        201:
          description: Created comment object
        401:
          $ref: '#/components/responses/Unauthorized'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Create comment
      tags:
      - Blog
  /blog/post/{postId}/comment/{commentId}:
    delete:
      description: Remove a specific comment
      operationId: deleteComment
      responses:
        204:
          content: {}
          description: Removed
        401:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Remove comment
      tags:
      - Blog
    parameters:
    - $ref: '#/components/parameters/langHeader'
    - $ref: '#/components/parameters/postId'
    - $ref: '#/components/parameters/commentId'
    put:
      description: Change comment details
      operationId: updateComment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Comment'
        required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Comment'
          description: Comment object
        401:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Update comment
      tags:
      - Blog
  /config:
    get:
      description: Get basic configurations, also check for updates on mobile clients.
      operationId: getConfig
      parameters:
      - $ref: '#/components/parameters/langHeader'
      - description: Version of the web or mobile client.
        in: query
        name: version
        required: true
        schema:
          type: string
      - description: Client platform.
        in: query
        name: platform
        required: true
        schema:
          enum:
          - Web
          - iOS
          - Android
          type: string
      responses:
        200:
          content:
            application/json:
              examples:
                forceUpdate:
                  summary: Update is mandatory on iOS.
                  value:
                    config: {}
                    update:
                      force: false
                      link: https://example.com/download
                      recommended: false
                    version: 1.0.0
                recommendedUpdate:
                  summary: Update is optional on Android.
                  value:
                    config: {}
                    update:
                      force: false
                      link: https://example.com/download
                      recommended: false
                    version: 1.0.0
                versionValid:
                  summary: Version is valid, no update required.
                  value:
                    config: {}
                    update:
                      force: false
                      link: https://example.com/download
                      recommended: false
                    version: 1.0.0
              schema:
                $ref: '#/components/schemas/Config'
          description: Successful operation
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Initial endpoint
      tags:
      - Config
  /health:
    get:
      description: Get detailed info about server health status.
      operationId: getHealth
      parameters:
      - description: Secure key for accessing health info
        in: query
        name: secure
        schema:
          example: eddb6be2-ae43-11ea-b3de-0242ac130004
          type: string
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Health'
          description: Service Healthy
        503:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Health'
          description: Service Unhealthy
      summary: Health check
      tags:
      - Health
  /media/{image}:
    get:
      description: Get raw image from media service
      operationId: getImage
      parameters:
      - $ref: '#/components/parameters/langHeader'
      - description: filename
        in: path
        name: image
        required: true
        schema:
          type: string
      responses:
        200:
          content:
            image/jpeg:
              schema:
                format: binary
                type: string
            image/png:
              schema:
                format: binary
                type: string
          description: Successful operation
        401:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Get Image
      tags:
      - Media
  /user:
    post:
      description: Start user registration process.
      operationId: createUser
      parameters:
      - $ref: '#/components/parameters/langHeader'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistration'
        required: true
      responses:
        201:
          content: {}
          description: Successful pre-registration
        409:
          $ref: '#/components/responses/Conflict'
        422:
          $ref: '#/components/responses/InvalidValue'
        429:
          $ref: '#/components/responses/TooMany'
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Register user
      tags:
      - User
  /user/auth/facebook:
    post:
      description: "Login with Facebook, \nMore details: https://developers.facebook.com/docs/facebook-login/access-tokens/\n"
      operationId: loginFacebook
      parameters:
      - $ref: '#/components/parameters/langHeader'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                access_token:
                  type: string
                user_id:
                  type: string
              type: object
        required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
          description: Successful login, access token
        401:
          $ref: '#/components/responses/Unauthorized'
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Facebook Sign-in
      tags:
      - User
  /user/auth/google:
    post:
      description: "Login with Google, \nMore details: https://developers.google.com/identity/sign-in/web/backend-auth"
      operationId: loginGoogle
      parameters:
      - $ref: '#/components/parameters/langHeader'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                id_token:
                  type: string
              type: object
        required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
          description: Successful login, access token
        401:
          $ref: '#/components/responses/Unauthorized'
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Google Sign-in
      tags:
      - User
  /user/auth/login:
    post:
      description: Login with credentials passed with basic auth.
      operationId: login
      parameters:
      - $ref: '#/components/parameters/langHeader'
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
          description: Successful login, access token
        422:
          $ref: '#/components/responses/InvalidValue'
        429:
          $ref: '#/components/responses/TooMany'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BasicAuth: []
      summary: Login with username and password
      tags:
      - User
  /user/auth/logout:
    post:
      description: Logout current user
      operationId: logout
      parameters:
      - $ref: '#/components/parameters/langHeader'
      responses:
        200:
          content: {}
          description: Successful logout
        401:
          $ref: '#/components/responses/Unauthorized'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Logout
      tags:
      - User
  /user/forgot:
    post:
      description: Initiate a password reset flow.
      operationId: forgotPassword
      parameters:
      - $ref: '#/components/parameters/langHeader'
      requestBody:
        content:
          application/json:
            schema:
              properties:
                email:
                  type: string
              type: object
        required: true
      responses:
        200:
          content: {}
          description: Successful password change request
        429:
          $ref: '#/components/responses/TooMany'
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Request password reset
      tags:
      - User
  /user/{userId}:
    get:
      description: Get user & basic settings info
      operationId: getUser
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetailed'
          description: UserDetailed object
        401:
          $ref: '#/components/responses/Unauthorized'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Get user details
      tags:
      - User
    parameters:
    - $ref: '#/components/parameters/langHeader'
    - $ref: '#/components/parameters/userId'
    put:
      description: Change user basic settings (not the secure parts)
      operationId: upadateUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserDetailed'
        required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetailed'
          description: UserDetailed object
        401:
          $ref: '#/components/responses/Unauthorized'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Update user details
      tags:
      - User
  /user/{userId}/device:
    parameters:
    - $ref: '#/components/parameters/langHeader'
    - $ref: '#/components/parameters/userId'
    post:
      description: Register new device token for push notification
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Device'
        required: true
      responses:
        201:
          description: Device created
        401:
          $ref: '#/components/responses/Unauthorized'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BearerAuth: []
      summary: Register user's device
      tags:
      - User
  /user/{userId}/reset/{resetKey}:
    post:
      description: Create new password with reset key.
      operationId: resetPassword
      parameters:
      - $ref: '#/components/parameters/langHeader'
      - $ref: '#/components/parameters/userId'
      - in: path
        name: resetKey
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                password:
                  type: string
              type: object
        description: New password
        required: true
      responses:
        200:
          content: {}
          description: Successful password change
        422:
          $ref: '#/components/responses/InvalidValue'
        429:
          $ref: '#/components/responses/TooMany'
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Reset password
      tags:
      - User
  /user/{userId}/secure:
    put:
      description: Change user secure settings (e.g. change password)
      operationId: upadateUserSecure
      parameters:
      - $ref: '#/components/parameters/langHeader'
      - $ref: '#/components/parameters/userId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserDetailed'
        required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetailed'
          description: UserDetailed object
        401:
          $ref: '#/components/responses/Unauthorized'
        default:
          $ref: '#/components/responses/Unexpected'
      security:
      - BasicAuth: []
      summary: Update secure user details
      tags:
      - User
  /user/{userId}/verify/{verificationKey}:
    post:
      description: User e-mail verification.
      operationId: verifyUser
      parameters:
      - $ref: '#/components/parameters/langHeader'
      - $ref: '#/components/parameters/userId'
      - in: path
        name: verificationKey
        required: true
        schema:
          type: string
      responses:
        200:
          content: {}
          description: Successful verification
        422:
          $ref: '#/components/responses/InvalidValue'
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Verify user
      tags:
      - User
  /{size}/smart/{imageUrl}:
    get:
      description: 'Image proxy service (like imgproxy, Thumbor etc.).

        Provides on-demand crop, resizing and flipping of images and caching of them.

        Check docs of service for detailed documentation.

        '
      parameters:
      - description: Image size
        in: path
        name: size
        required: true
        schema:
          example: 200x300
          type: string
      - description: Url of raw image to manipulate.
        in: path
        name: imageUrl
        required: true
        schema:
          example: example.com/api/v1/media/image.jpg
          type: string
      responses:
        200:
          content:
            image/jpeg:
              schema:
                format: binary
                type: string
            image/png:
              schema:
                format: binary
                type: string
          description: Successful operation
        401:
          $ref: '#/components/responses/Unauthorized'
        404:
          $ref: '#/components/responses/NotFound'
        default:
          $ref: '#/components/responses/Unexpected'
      summary: Image proxy
      tags:
      - Media
    servers:
    - description: Host of image proxy
      url: https://imgproxy.example.com
security:
- ApiKey: []
servers:
- url: '{protocol}://{environment}.example.com/api/v1'
  variables:
    environment:
      default: api
      enum:
      - api
      - api.dev
      - api.staging
      - api.test
    protocol:
      default: https
      enum:
      - http
      - https
tags:
- description: Configuration data, version check and other initial endpoints
  name: Config
- description: User related services (authentication, settings, device managment,
    etc.). Auth can be exchanged with Firebase Auth or SSO services.
  name: User
- description: Blog related endpoints, posts and comments
  name: Blog
- description: Media service, providing all media resources
  name: Media
- description: Health check information related endpoints
  name: Health
